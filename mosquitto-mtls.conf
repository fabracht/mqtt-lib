# Mosquitto mTLS configuration for testing
# Requires client certificates

# Plain MQTT listeners
listener 1883 0.0.0.0
listener 1883 ::
allow_anonymous true

# mTLS MQTT listener
listener 8884
allow_anonymous true
cafile test_certs/ca.pem
certfile test_certs/server.pem  
keyfile test_certs/server.key
require_certificate true
use_identity_as_username false

# Enable persistence for session storage
persistence true
persistence_location /tmp/mosquitto/

# Session and message settings
max_inflight_messages 20
max_queued_messages 100
max_queued_bytes 0
autosave_interval 30

# Logging
log_dest stdout
log_type all