# Mosquitto configuration for testing with persistence

# Plain MQTT listeners
listener 1883 0.0.0.0
listener 1883 ::
allow_anonymous true

# TLS MQTT listener
listener 8883
allow_anonymous true
cafile /mosquitto/certs/ca.pem
certfile /mosquitto/certs/client.pem  
keyfile /mosquitto/certs/client.key

# Enable persistence for session storage
persistence true
persistence_location /mosquitto/data/

# Session and message settings
max_inflight_messages 20
max_queued_messages 100
max_queued_bytes 0
autosave_interval 30

# Logging
log_dest stdout
log_type all