# Mosquitto configuration for CI testing

# Plain MQTT listeners
listener 1883 0.0.0.0
listener 1883 ::
allow_anonymous true

# TLS MQTT listener
listener 8883
allow_anonymous true
cafile test_certs/ca.pem
certfile test_certs/client.pem  
keyfile test_certs/client.key

# Enable persistence for session storage
persistence true
persistence_location /tmp/mosquitto/

# Session and message settings
max_inflight_messages 20
max_queued_messages 100
max_queued_bytes 0
autosave_interval 30

# Logging
log_dest stdout
log_type all